(this["webpackJsonprobot-web-viewer"]=this["webpackJsonprobot-web-viewer"]||[]).push([[0],{216:function(e,t,n){e.exports=n(507)},507:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(56),i=n.n(a),s=n(210),c=n(22),u=n(195),l=n.n(u),b=n(92),j=n(17),f=n(197),h=n.n(f),p=n(12),g=n(0),m=n(8),d=n(91),O=n(98),v=n(212),w=n(144),x=n(49);function y(){var e=Object(b.a)(["\n  width: 100vw;\n  height: 100vh;\n  background-color: #272727;\n"]);return y=function(){return e},e}var M=Object(j.css)(y()),F=function(e){var t=Object.assign({},e);return Object(j.jsx)("mesh",Object.assign({},t,{receiveShadow:!0}),Object(j.jsx)("planeBufferGeometry",{attach:"geometry",args:[10,10]}),Object(j.jsx)("meshPhongMaterial",{attach:"material",color:"lightpink"}))},k=new g.Vector2,P=new g.Raycaster,E=function(e){return e.isURDFJoint&&"fixed"!==e.jointType},_=function(e){var t,n=e.filepath,a=o.a.useState(null),i=Object(p.a)(a,2),s=i[0],c=i[1],u=Object(m.i)(),l=u.camera,b=u.gl,f=Object(x.b)("Pos X",{type:"number",spring:!0}),h=Object(x.b)("Pos Y",{type:"number",spring:!0}),w=Object(x.b)("Pos Z",{type:"number",spring:!0}),y=Object(r.useRef)(),M=Object(m.h)(v.a,n,(function(e){e.loadMeshFunc=function(e,t,n){switch(e.split(/\./g).pop().toLowerCase()){case"stl":new O.a(t).load(e,(function(e){var t=new g.MeshPhongMaterial,r=new g.Mesh(e,t);n(r)}),null,(function(e){return n(null,e)}))}},e.fetchOptions={headers:{Accept:"application/vnd.github.v3.raw"}}}));t=Object(r.useMemo)((function(){return Object.keys(M.joints)}),[M]);var F=Object(x.b)("jointName",{type:"select",items:t});Object(x.b)("jointAngle",{type:"number",value:M.joints[F].angle,min:-6.28,max:6.28,onChange:function(e){M.joints[F].setAngle(e)}});var _=new g.MeshPhongMaterial({shininess:10,color:"#FFFFFF",emissive:"#FFFFFF",emissiveIntensity:.25}),L=function(e,t){!function n(r){if("Mesh"===r.type&&(t?(r.material=r.__origMaterial,delete r.__origMaterial):(r.__origMaterial=r.material,r.material=_)),r===e||!E(r))for(var o=0;o<r.children.length;o++)n(r.children[o])}(e)},R=function(e){var t,n,r;t=b.domElement,n=e,(r=k).x=(n.pageX-t.offsetLeft)/t.offsetWidth*2-1,r.y=-(n.pageY-t.offsetTop)/t.offsetHeight*2+1;var o=function(e,t,n){if(!t)return[];P.setFromCamera(n,e);var r=[];return t.traverse((function(e){return"Mesh"===e.type&&r.push(e)})),P.intersectObjects(r)}(l,M,k).shift()||null,a=o&&function(e){for(var t=e;t&&!E(t);)t=t.parent;return t}(o.object);a!==s&&(s&&(L(s,!0),c(null)),a&&(L(a,!1),c(a)))};return Object(j.jsx)(d.a.mesh,{"position-x":f,"position-y":h,"position-z":w,rotation:[-.5*Math.PI,0,Math.PI],scale:[10,10,10]},Object(j.jsx)("primitive",{ref:y,object:M,dispose:null,onPointerMove:function(e){return R(e)},onPointerOut:function(e){s&&(L(s,!0),c(null))}}))},L=function(e){var t=Object.assign({},e),n="https://raw.githubusercontent.com/nakano16180/robot-web-viewer/master/public/urdf/open_manipulator.URDF";t.qs.filepath&&(n=t.qs.filepath);var o=Object(r.useRef)(),a=Object(r.useRef)(),i=Object(x.b)("mode",{type:"select",items:["translate","rotate"]});return Object(r.useEffect)((function(){if(a.current){var e=a.current;e.setMode(i);var t=function(e){return o.current.enabled=!e.value};return e.addEventListener("dragging-changed",t),function(){return e.removeEventListener("dragging-changed",t)}}})),Object(j.jsx)("div",{css:M},Object(j.jsx)(m.a,{camera:{position:[0,5,10]}},Object(j.jsx)("hemisphereLight",{skyColor:"#455A64",groundColor:"#000",intensity:.5,position:[0,1,0]}),Object(j.jsx)("directionalLight",{color:16777215,position:[4,10,1],shadowMapWidth:2048,shadowMapHeight:2048,castShadow:!0}),Object(j.jsx)(F,{rotation:[-.5*Math.PI,0,0],position:[0,0,0]}),Object(j.jsx)(r.Suspense,{fallback:null},Object(j.jsx)(w.b,{ref:a,mode:i},Object(j.jsx)(_,{filepath:n})),Object(j.jsx)(w.a,{ref:o})),Object(j.jsx)("gridHelper",{args:[0,0,0]}),Object(j.jsx)("axesHelper",null)),Object(j.jsx)(x.a,null))};function R(){var e=Object(b.a)(["\n    ","\n    *, *::after, *::before {\n        box-sizing: border-box;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-font-smoothing: antialiased;\n        font-smoothing: antialiased;\n    }\n"]);return R=function(){return e},e}var C=Object(j.css)(R(),h.a),I=function(e){var t=Object.assign({},e);return Object(j.jsx)("div",null,Object(j.jsx)(j.Global,{styles:C}),Object(j.jsx)(L,t))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(s.a,null,o.a.createElement(c.a,{render:function(e){return o.a.createElement(I,{qs:l.a.parse(e.location.search)})}}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[216,1,2]]]);
//# sourceMappingURL=main.80e3a6b3.chunk.js.map